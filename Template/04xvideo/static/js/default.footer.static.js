/* Built on 2019-10-25 09:33:05 */
!function(){var e=function(e,n,t){var o=document.getElementById("header-"+(n.is_desktop?"desktop-":"mobile-")+e+"-toggle");o&&(n.opened=!1,n.menu=document.getElementById(n.id),n.menu_toggler=o,n.toggle=function(o){if(void 0===o||o!==n.opened){if(n.opened)xv.dom.addClass(n.menu,n.hide_class?n.hide_class:"mobile-hide"),n.body_cls_onopen&&xv.dom.removeClass(document.body,n.body_cls_onopen),xv.dom.removeClass(n.menu_toggler,n.icon_cls),"function"==typeof n.onclose_func&&n.onclose_func(n);else{"undefined"!=typeof window.xv&&"undefined"!=typeof window.xv.header&&"function"==typeof window.xv.header.close_mobile_menu&&window.xv.header.close_mobile_menu();for(var s in t)s!==e&&t[s].toggle&&t[s].toggle(!1);xv.dom.removeClass(n.menu,n.hide_class?n.hide_class:"mobile-hide"),xv.dom.addClass(n.menu_toggler,n.icon_cls),n.body_cls_onopen&&xv.dom.addClass(document.body,n.body_cls_onopen),"function"==typeof n.onopen_func&&n.onopen_func(n),n.dontScrollToTop||xv.dom.scrollToTop()}n.opened=!n.opened}},window.xv.mobile.togglers.push(n),o.onclick=function(e){return e||(e=this.originalEvent),e&&("function"==typeof e.preventDefault?e.preventDefault():e.returnValue=!1),n.toggle(),!1})},n={togglers:new Array,menus_init:function(n){for(var t in n)e(t,n[t],n)},menus_close:function(){if(!1!==window.xv.mobile.togglers)for(var e in window.xv.mobile.togglers)window.xv.mobile.togglers[e].toggle(!1)}};window.xv||(window.xv={}),window.xv.mobile=n}(),function(){window.xv||(window.xv={});var e=function(e,n){if(this.method=n&&"string"==typeof n.method?n.method:"default",this.close_closable="reduce_all_and_close"===this.method||"tap_reduce_all_and_close"===this.method,this.closable_messages=[],this.msgs_node=e,this.msgs_node_inner=xv.dom.getFirstChild(this.msgs_node),this.toggle_btn=!1,this.cookie_expiration={},this.setup_close_action(this.method),this.init_done=!1,n&&n.toggle_btn){this.toggle_btn=n.toggle_btn,this.init_node();var t=this;n.tap_message_to_close&&window.addEventListener("load",function(){t.setup_close_action("tap_reduce_all_and_close")})}};e.prototype={setup_close_action:function(e){if(this.msgs_node_inner){var n=null,t=xv.dom.getChildren(this.msgs_node_inner);for(var o in t){var s=t[o];xv.dom.hasClass(s,"x-message")?(this.setup_one_close_action(e,s,n),n=null):xv.dom.hasClass(s,"x-message-arrow")&&(n=s)}}},setup_one_close_action:function(e,n,t){var o=this;if("tap_reduce_all_and_close"===e)return this.touch_started=!1,$(n).on("touchstart",function(){o.touch_started=Date.now()}),$(n).on("touchend",function(e){if(!o.touch_started)return!1;0===$(e.target).closest("a").length&&Date.now()-o.touch_started<100&&(e.preventDefault(),o.toggle_message(!1)),o.touch_started=!1}),!0;var s=xv.dom.getChildren(n);for(var d in s)if(xv.dom.hasClass(s[d],"reduce")||xv.dom.hasClass(s[d],"del")){var i=s[d];if(xv.dom.hasClass(i,"del")){var a=!1;if(!(a=i.dataset?i.dataset.id:i.getAttribute("id")))return void i.parentNode.removeChild(i);this.closable_messages[a]={message:n,arrow:t}}xv.dom.hasClass(i,"reduce")||this.close_closable&&xv.dom.hasClass(i,"del")?xv.dom.addEventListener(i,"click",function(){o.toggle_message(!1)}):xv.dom.hasClass(i,"del")&&xv.dom.addEventListener(i,"click",function(e){e=e||window.event;for(var n=e.target||e.srcElement,t=!1;"A"!==n.tagName;){if("BODY"===n.tagName)return!1;n=n.parentNode}t=n.dataset?n.dataset.id:n.getAttribute("id"),o.del_closable(t)})}},register_hash:function(e,n){this.cookie_expiration[e]=n||1296e3,xv.dom.removeClass(this.toggle_btn,"hidden")},toggle_message:function(e){if(xv.dom.removeClass(this.msgs_node,"preview"),"object"==typeof e&&("function"==typeof e.preventDefault?e.preventDefault():e.returnValue=!1),"boolean"!=typeof e&&(e=!this.opened),e!==this.opened){var n=xv.dom.getChildren(this.msgs_node);for(c in n)xv.dom.hasClass(n[c],"extend")&&this.msgs_node.removeChild(n[c]);if(e)xv.dom.addClass(this.msgs_node,"opened"),xv.dom.addClass(this.toggle_btn,"opened");else{xv.dom.removeClass(this.msgs_node,"opened"),xv.dom.removeClass(this.toggle_btn,"opened");var t=[],o=0,s=Math.round((new Date).getTime()/1e3);for(var i in this.cookie_expiration)t.push(i+":"+(s+parseInt(this.cookie_expiration[i]))),o=Math.max(0,this.cookie_expiration[i]);if(xv.cookies.setLocal("hide_xmsg",t.join(","),1e3*o,"/"),this.close_closable){var a=this;setTimeout(function(){a.close_all_closable()},100)}}this.opened=e;for(var r in d)d[r](e)}},show_preview:function(){if(this.is_opened())return!1;xv.dom.addClass(this.msgs_node,"preview"),xv.dom.addClass(this.msgs_node,"opened");var e=document.createElement("div");xv.dom.addClass(e,"extend"),this.msgs_node.appendChild(e);var n=this;setTimeout(function(){n.is_opened()||xv.dom.removeClass(n.msgs_node,"opened");var e=xv.dom.getChildren(n.msgs_node);for(c in e)xv.dom.hasClass(e[c],"extend")&&n.msgs_node.removeChild(e[c])},5e3),xv.dom.addEventListener(e,"click",function(){n.toggle_message(!0)})},del_closable:function(e){if("string"!=typeof e||!this.closable_messages[e])return!1;var n=this.closable_messages[e],t=xv.utils.createRequestObject();t.withCredentials=!0,t.open("POST","/account/message-closed",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send("msgid="+e),this.msgs_node_inner.removeChild(n.message),n.arrow&&this.msgs_node_inner.removeChild(n.arrow),this.update_m_btn(),this.closable_messages[e]=!1},close_all_closable:function(){for(var e in this.closable_messages)this.del_closable(e)},init_node:function(){if(!this.init_done){var e=xv.dom.getChildren(this.msgs_node_inner);this.opened=xv.dom.hasClass(this.msgs_node,"opened"),this.opened&&xv.dom.addClass(this.toggle_btn,"opened");var n=this;for(var t in e){var o=e[t];xv.dom.hasClass(o,"x-close")?xv.dom.addEventListener(o,"click",function(){n.toggle_message()}):xv.dom.hasClass(o,"x-message")&&this.register_hash(o.getAttribute("data-hash"),o.getAttribute("data-expires"))}xv.dom.addEventListener(this.toggle_btn,"click",function(){n.toggle_message()}),this.update_m_btn(),this.init_done=!0}},is_opened:function(){return this.opened},update_m_btn:function(){if(this.toggle_btn){var e=xv.dom.getChildren(this.msgs_node_inner),n=0;for(var t in e)xv.dom.hasClass(e[t],"x-message")&&n++;var o=this.toggle_btn.className,s=/x-x-messages-btn-\d+/g,d=o.match(s);if(d.length>0)for(var i in d)xv.dom.removeClass(this.toggle_btn,d[i]);xv.dom.addClass(this.toggle_btn,"x-x-messages-btn-"+n);var a=xv.dom.getChildrenRecursive(this.toggle_btn);for(var r in a)xv.dom.hasClass(a[r],"badge")&&(a[r].innerHTML=n)}},get_m_btn:function(){return this.toggle_btn},get_msgs_node:function(){return this.msgs_node},get_msgs_node_inner:function(){return this.msgs_node_inner},set_next_to_chat:function(){xv.dom.addClass(this.msgs_node,"chat-window-side"),xv.dom.addClass(this.toggle_btn,"chat-window-side")}};var n=document.getElementById("x-home-messages");n&&new e(n);var t=document.getElementById("x-red-home-messages");t&&new e(t),window.xv.update_ajax_tab_messages=function(){var n=document.getElementById("x-ajax-tab-messages");n&&new e(n)};var o=document.getElementById("x-messages"),s=!1;o&&(s=new e(o,{method:"reduce_all_and_close",tap_message_to_close:!0,toggle_btn:document.getElementById("x-x-messages-btn")}));var d=[],i={registerOnToggle:function(e){d.push(e)}};window.xv.messages=i,window.xv.add_message_from_chat=function(n,t,o){var d=!1;if(d=s?s.get_m_btn():document.getElementById("x-x-messages-btn")){if(!s){var i=document.createElement("div");xv.dom.addClass(i,"x-message-arrow");var a=document.createElement("div");xv.dom.addClass(a,"inner");var r=document.createElement("div");r.id="x-messages",a.appendChild(i),r.appendChild(a),d.parentNode.insertBefore(r,d),s=new e(r,{method:"reduce_all_and_close",tap_message_to_close:!0,toggle_btn:d})}xv.conf&&xv.conf.dyn&&xv.conf.dyn.chat&&xv.conf.dyn.chat.enabled&&(xv.dom.addClass(s.get_msgs_node,"chat-window-side"),xv.dom.addClass(d,"chat-window-side"));var _,l=xv.dom.getChildren(s.get_msgs_node_inner());for(var m in l)if(xv.dom.hasClass(l[m],"x-message")){_=l[m];break}var v=document.createElement("div");v.innerHTML=n;var c=xv.dom.getFirstChild(v);_?s.get_msgs_node_inner().insertBefore(c,_):s.get_msgs_node_inner().appendChild(c),s.register_hash(c.getAttribute("data-hash"),c.getAttribute("data-expires")),s.update_m_btn(),s.setup_one_close_action("reduce_all_and_close",c,!1),s.setup_one_close_action("tap_reduce_all_and_close",c,!1),s.is_opened()||(o?s.toggle_message(!0):s.show_preview())}},window.xv.set_message_next_to_chat=function(){s&&s.set_next_to_chat()},window.xv.test=function(){s.show_preview()}}(),function(){var e={};if(e.menu={id:"mobile-menu",icon_cls:"vertical"},e.filters={id:"mobile-filters-menu",icon_cls:"opened"},e.search={id:"xv-search-form",icon_cls:"close",dontScrollToTop:!0,onopen_func:function(){if(window.jQuery){$("#xv-search-form input[type=text]").first().focus();var e=$("#xv-search-form").offset().top;if($(window).width()>$(window).height()&&$(window).scrollTop()<e)return $("html,body").animate({scrollTop:e},400),!1}xv.dom.scrollToTop()}},xv.mobile.menus_init(e),xv.header&&(xv.header.nav=document.getElementById("nav"),xv.header.nav)){xv.header.nav_var={menu_toggle:document.getElementById("header-menu-toggle"),is_opened_desktop:xv.dom.hasClass(xv.header.nav,"forced-opened"),main_gender_cats_btn:document.getElementById("main-cat-switch-a"),main_cat_btn:document.getElementById("main-cat-sub-list-btn"),home_trends_btn:document.getElementById("home-trends-sub-list-btn"),video_history_btn:document.getElementById("video-history-sub-list-btn")};var n,t={},o=!1,s=0,d=function(){for(var e in t)i(e)},i=function(e){!1===t[e].initiated&&(t[e].initiated="processing",t[e].list&&t[e].btn?xv.dom.addEventListener(t[e].btn,"click",function(){l(e)}):t[e].disabled=!0,t[e].initiated=!0)},a=function(e){if(xv.header.is_mobile_menu(!1)){n=!1;for(var o in t)t[o].is_opened=!1}else!0!==e&&_(!1);xv.header.update_menu_classs()},r=function(e){if(xv.header.is_mobile_menu(!1)&&"desktop"!==e){n=!0,"undefined"!=typeof window.xv&&"undefined"!=typeof window.xv.mobile&&"function"==typeof window.xv.mobile.menus_close&&window.xv.mobile.menus_close();var s=!0;for(var d in t)!0===t[d].is_opened&&(s=!1);!0===s&&(t[o].is_opened=!0)}else _(!0);"undefined"!=typeof xv.header&&"undefined"!=typeof xv.header.trends&&"function"==typeof xv.header.trends.position&&xv.header.trends.position(),xv.header.update_menu_classs()},_=function(e){e=!!e,xv.conf&&xv.conf.dyn&&xv.conf.dyn.menu_state_save_id&&(e?xv.cookies.setLocal(xv.conf.dyn.menu_state_save_id,"opened",5e3,"/"):xv.cookies.setLocal(xv.conf.dyn.menu_state_save_id,"closed",2592e6,"/")),xv.header.nav_var.is_opened_desktop=e},l=function(e){if(t[e].is_opened)return xv.header.update_menu_classs(),void("function"==typeof t[e].already_open_func&&t[e].already_open_func());for(var n in t)t[n].is_opened=!1;t[e].is_opened=!0,xv.header.update_menu_classs()};xv.header.add_sub_menu=function(e,n,i,a,r,_){if(e&&n){var l={btn:e,list:n,is_opened:!1,disabled:!1,initiated:!1};return s++,"string"!=typeof i&&(i="sub_menu_"+s),_&&"function"==typeof _.already_open_func&&(l.already_open_func=_.already_open_func),t[i]=l,!1!==o&&!0!==r||(o=i),!0!==a&&d(),i}},xv.header.close_mobile_menu=function(){a(!0)},xv.header.is_menu_opened=function(){return window_resize_callback(!1),!xv.header.is_mobile_menu(!1)&&xv.header.nav_var.is_opened_desktop||xv.header.is_mobile_menu(!1)&&n},xv.header.is_sub_menu_opened=function(e){return!(!xv.header.is_menu_opened()||"undefined"==typeof t[e]||!t[e].is_opened)},xv.header.open_sub_menu=function(e){if(!xv.header.is_mobile_menu(!1))return!1;if(!e){if(!o)return!1;e=o}r("mobile"),l(e),"undefined"!=typeof window.xv&&"undefined"!=typeof window.xv.dom&&"function"==typeof window.xv.dom.scrollToTop&&window.xv.dom.scrollToTop()},xv.header.open_default_sub_menu=function(){xv.header.open_sub_menu()},xv.header.update_menu_classs=function(){if(window.jQuery)if(xv.header.is_mobile_menu(!1)){var e=$(".home-trends #home-trends-sub-list-btn");e.length>0&&e.parent("li").insertAfter($("#main-cat-sub-list-btn").parent("li"))}else{var e=$(".main-categories #home-trends-sub-list-btn");e.length>0&&$(".home-trends > ul").prepend(e.parent("li"))}xv.header.is_menu_opened()?(xv.dom.addClass(xv.header.nav,"opened"),xv.dom.addClass(xv.header.nav_var.menu_toggle,"opened"),xv.header.is_mobile_menu(!1)||"undefined"==typeof xv||"undefined"==typeof xv.header?xv.dom.addClass(document.body,"mobile-menu-opened"):("undefined"!=typeof xv.header.categories&&"function"==typeof xv.header.categories.position&&setTimeout(xv.header.categories.position,150),"undefined"!=typeof xv.header.trends&&"function"==typeof xv.header.trends.position&&setTimeout(xv.header.trends.position,150))):(xv.dom.removeClass(xv.header.nav,"opened forced-opened"),xv.dom.removeClass(xv.header.nav_var.menu_toggle,"opened"),xv.dom.removeClass(document.body,"mobile-menu-opened"));for(var n in t)!0!==t[n].disabled&&(t[n].is_opened?(xv.dom.addClass(t[n].btn,"opened"),xv.dom.addClass(t[n].list,"opened")):(xv.dom.removeClass(t[n].btn,"opened"),xv.dom.removeClass(t[n].list,"opened")))},xv.header.update_sub_menu_btn=function(e,n){"undefined"!=typeof t[e]&&n&&(t[e].btn=n,xv.dom.addEventListener(t[e].btn,"click",function(){l(e)}))},xv.header.update_sub_menu_list=function(e,n){"undefined"!=typeof t[e]&&n&&(t[e].list=n)},xv.header.nav_var.main_cat_btn&&xv.header.add_sub_menu(xv.header.nav_var.main_cat_btn,document.getElementById("main-cat-sub-list"),"main_cat",!0),xv.header.nav_var.home_trends_btn&&xv.header.add_sub_menu(xv.header.nav_var.home_trends_btn,document.getElementById("home-trends-sub-list"),"home_trends",!0),xv.header.nav_var.main_gender_cats_btn&&(xv.header.add_sub_menu(xv.header.nav_var.main_gender_cats_btn,document.getElementById("nav-main-cat-switcher-list"),"main_gender_cats",!0),xv.dom.addClass(xv.header.nav_var.main_gender_cats_btn,"init-ok")),xv.header.nav_var.video_history_btn&&xv.header.add_sub_menu(xv.header.nav_var.video_history_btn,document.getElementById("video-history"),"video_history",!0),d(),xv.header.update_menu_classs(),window_resize_callback(),xv.dom.addEventListener(window,"resize",xv.header.window_resize),xv.dom.addEventListener(xv.header.nav_var.menu_toggle,"click",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,(xv.header.is_mobile_menu(!1)?n:xv.header.nav_var.is_opened_desktop)?a():r()}),xv.dom.addClass(xv.header.nav_var.menu_toggle,"init-ok")}}();